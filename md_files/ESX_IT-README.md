# EcoStruxure IT Expert API Guide
## Requirements for EcoStruxure IT Expert API
**BETA**

A valid IT Expert subscription is required to use the EcoStruxure IT Expert API. Partners can use the API for their customers if that customer has an IT Expert subscription.

Customers and Partners using the API should make sure that the calls they make don't cause performance issues for the EcoStruxure IT platform or for other API users.

Schneider Electric reserves the right to disconnect customers or Partners either temporarily or permanently if their API calls cause performance issues.

## Understanding the EcoStruxure IT Expert API
The EcoStruxure IT Expert API gives users a way to integrate EcoStruxure IT into their own environments. Its functionalities allow users to maintain a local data store or to build applications that react to changes in their critical infrastructure.

Currently the API is an open beta, so it can be subject to changes in its functionality and performance.

Overview
The APIs grant access to:

* **Locations**
    * All locations created in EcoStruxure IT
* **Devices**
    * All discovered devices, including the most relevant device properties, relationships to other devices, and locations.
* **Alarms**
    * All alarms generated by devices or threshold configurations, including information about the alarmâ€™s lifetime and severity, and a reference to the originating device.
* **Sensors**
    * All device sensors, including unit, label, and a reference to the parent device.
* **Measurements**
    * Measurements for device sensors.

For everything except measurements, the APIs allow users to: 

- Retrieve a snapshot of their "State of the World", retrieving all existing devices, locations, and sensors as well as all active or recently cleared alarms.
- Poll for changes to get the changes that have occurred since the last snapshot or poll.

For measurements, the APIs allow users to:

1. **Stream live measurements** where a connection is kept alive and measurements are sent as they become available from the time at which the connection was established.
2. **Replay measurements** that were missed because of a short period of being disconnected from the live measurement stream.

The APIs are relevant both for customers who monitor their own environment and partners who monitor infrastructure environments on behalf of their customers.

**Technical Documentation** 

You can download detailed API documentation and a technical breakdown of the various features and example programs that demonstrate the proper usage here: 

https://schneider-electric.box.com/s/4b2rzzci2gin07dceqfp6okgsaxla9gc

For rate limits applicable to the APIs, please read the documentation. Note that rate limits may vary for the different API calls.

## Getting access to the EcoStruxure IT Expert API as a partner
Partners can use the EcoStruxure IT Expert APIs to access the device data of their connected and valid customers. A customer is considered valid for access via the APIs when:

1. the customer has an active IT Expert subscription, either paid and trial, and
2. the customer has allowed their partner(s) to access their data via the API.

**Getting customer consent**
- Partners must contact the customer and ask them to log in to their EcoStruxure IT, navigate to Administration > Subscriptions, and check Allow API access to device data in the Your partner section.

<img src="https://helpcenter.ecostruxureit.com/hc/article_attachments/360005613617/customer-consent.png" style="zoom:67%;" />

**Verifying customer consent**

The API provides a call that allows Partners to get a list of all the unique identifiers for customers who are currently covered by the key. When a customer revokes their consent, their identifier will no longer appear in the list.

If a customer has revoked their consent, the API automatically denies any further access to their data. It is still the responsibility of the Partner to verify the customer's continued consent and take appropriate actions should access no longer be granted. 

## Creating a key

To be able to call the APIs, Partners must first generate an API key. You can see a list of currently valid API keys on the Administration > API tab.  

<img src="https://helpcenter.ecostruxureit.com/hc/article_attachments/360005613857/partner-api-key-list.png" style="zoom:67%;" />
<img src="https://helpcenter.ecostruxureit.com/hc/article_attachments/360005613857/partner-api-key-create.png" style="zoom:67%;" />

Partners can create three types of keys:

- Demo Accesses a set of data from a demo customer for testing purposes
- All Customers Grants access to data from all their valid customers. Newly added customers are dynamically included. Invalid customers do not appear in the list.
- Specific Customers Grants access to the data from a selected set of their valid customers. Invalid customers do not appear in the list.

**IMPORTANT**: For security purposes, you are required to copy the key when it is created. Store it in a safe place. Your key cannot be retrieved. If it is lost, you will have to delete it and create a new one.

<img src="https://helpcenter.ecostruxureit.com/hc/article_attachments/360005690838/partner-api-key-copy.png" style="zoom:67%;" />
